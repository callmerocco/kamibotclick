<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Protocol - LinkSwift v2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #020617; color: #f8fafc; overflow-x: hidden; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.08); }
        .scan-anim { background: linear-gradient(to bottom, transparent, #3b82f6, transparent); height: 100px; width: 100%; position: absolute; top: -100px; animation: scanMove 3s infinite; opacity: 0.3; }
        @keyframes scanMove { 0% { top: -100px; } 100% { top: 100%; } }
        .ad-zone { background: rgba(255,255,255,0.02); border: 1px dashed rgba(255,255,255,0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center">

    <div class="w-full bg-black/50 backdrop-blur-md border-b border-white/5 py-2 flex flex-col items-center sticky top-0 z-[100]">
        <span class="text-[9px] text-slate-500 font-bold uppercase tracking-[0.3em] mb-1">Secure Sponsor Content</span>
        <script type="text/javascript">
            atOptions = { 'key' : '448e404a0e501735472e96bd763fedc3', 'format' : 'iframe', 'height' : 90, 'width' : 728, 'params' : {} };
        </script>
        <script src="https://www.highperformanceformat.com/448e404a0e501735472e96bd763fedc3/invoke.js"></script>
    </div>

    <main class="w-full max-w-4xl grid grid-cols-1 lg:grid-cols-12 gap-6 p-6 mt-4">
        
        <div class="hidden lg:flex lg:col-span-3 flex-col gap-4">
            <div class="ad-zone h-[300px] w-full">
                <span class="text-slate-700 text-[10px] mono">SIDEBAR_AD_728x90_RESIZED</span>
            </div>
            <div class="ad-zone h-[300px] w-full text-slate-700 text-[10px] mono uppercase tracking-widest">
                Scroll-Linked Ad Zone
            </div>
        </div>

        <div class="lg:col-span-6 space-y-6">
            <div class="glass rounded-[2.5rem] p-8 relative overflow-hidden shadow-2xl shadow-blue-900/20">
                <div class="scan-anim"></div>
                
                <div class="flex items-center gap-4 mb-8">
                    <div class="h-14 w-14 bg-blue-600/20 rounded-2xl flex items-center justify-center border border-blue-500/30">
                        <svg class="w-7 h-7 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-black text-white leading-none">SafeLink™ Analyzer</h1>
                        <p class="text-xs text-slate-500 mt-1 mono uppercase tracking-tighter">Status: Scanning Target...</p>
                    </div>
                </div>

                <div class="bg-black/40 rounded-2xl p-5 border border-white/5 mb-8">
                    <p class="text-[10px] mono text-blue-400 mb-2 uppercase font-bold">Target Meta-Data</p>
                    <div id="target-info" class="space-y-2">
                        <div class="h-4 w-3/4 bg-slate-800 rounded animate-pulse"></div>
                        <div class="h-4 w-1/2 bg-slate-800 rounded animate-pulse"></div>
                    </div>
                </div>

                <div class="flex flex-col items-center justify-center py-4">
                    <div class="relative h-24 w-24 mb-6">
                        <svg class="h-24 w-24 transform -rotate-90">
                            <circle cx="48" cy="48" r="44" stroke="#0f172a" stroke-width="8" fill="transparent"/>
                            <circle id="progress" cx="48" cy="48" r="44" stroke="#2563eb" stroke-width="8" fill="transparent" stroke-dasharray="276" stroke-dashoffset="276" class="transition-all duration-1000 ease-linear"/>
                        </svg>
                        <span id="timerText" class="absolute inset-0 flex items-center justify-center text-3xl font-black text-white">10</span>
                    </div>
                    <p id="status-msg" class="text-sm mono text-slate-400">Verifying SSL Certificates...</p>
                </div>

                <button id="finalBtn" disabled class="w-full mt-8 bg-slate-800 text-slate-500 py-6 rounded-3xl font-black uppercase tracking-widest transition-all cursor-not-allowed border border-white/5">
                    Analyzing...
                </button>
            </div>

            <div class="ad-zone h-[250px] w-full flex-col gap-2">
                <span class="text-slate-700 text-[10px] mono">AD_ZONE_300x250</span>
                </div>
        </div>

        <div class="hidden lg:flex lg:col-span-3 flex-col gap-4">
            <div class="ad-zone h-[610px] w-full text-slate-700 text-[10px] mono uppercase vertical-text">
                Skyscraper Monetization Zone
            </div>
        </div>

    </main>

    <div class="fixed bottom-0 w-full bg-blue-600 p-3 text-center text-white font-bold text-sm z-[100] cursor-pointer hover:bg-blue-500 transition-all">
        AD: Secure Your Connection with LinkSwift Premium — Click Here
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { 
            apiKey: "AIzaSyAuTU6BV_uxz56NYiJioV2NJ7Wk_wMhL0g",
            authDomain: "kamibotclick.firebaseapp.com",
            projectId: "kamibotclick",
            storageBucket: "kamibotclick.firebasestorage.app",
            messagingSenderId: "112587834193",
            appId: "1:112587834193:web:c3fb8e45f24b874edf8970" 
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const id = window.location.pathname.split('/').filter(s => s && s !== 'go').pop();

        async function analyzeLink() {
            let target = "https://www.google.com";
            if(id) {
                try {
                    const snap = await getDoc(doc(db, "links", id));
                    if(snap.exists()) target = snap.data().target;
                } catch(e) {}
            }

            // SIMULATE REAL CHECK
            const targetInfo = document.getElementById('target-info');
            const urlObj = new URL(target);
            
            setTimeout(() => {
                targetInfo.innerHTML = `
                    <div class="text-xs mono"><span class="text-slate-500">DOMAIN:</span> <span class="text-white">${urlObj.hostname}</span></div>
                    <div class="text-xs mono"><span class="text-slate-500">PROTOCOL:</span> <span class="text-green-500">HTTPS/SECURE</span></div>
                    <div class="text-xs mono"><span class="text-slate-500">THREAT:</span> <span class="text-blue-500">0% DETECTED</span></div>
                `;
                startTimer(target);
            }, 1000);
        }

        function startTimer(targetUrl) {
            let count = 10;
            const btn = document.getElementById('finalBtn');
            const prog = document.getElementById('progress');
            const txt = document.getElementById('timerText');
            const msg = document.getElementById('status-msg');

            const statusSteps = [
                "Bypassing Proxy...",
                "Scanning Redirects...",
                "Heuristic Analysis...",
                "Database Lookup...",
                "Finalizing Handshake..."
            ];

            const itv = setInterval(() => {
                count--;
                txt.innerText = count;
                prog.style.strokeDashoffset = 276 - (276 * (10 - count) / 10);
                
                if(count % 2 === 0) msg.innerText = statusSteps[Math.floor(Math.random()*statusSteps.length)];

                if(count <= 0) {
                    clearInterval(itv);
                    msg.innerText = "Target Verified: SAFE";
                    msg.className = "text-sm mono text-green-500 font-bold";
                    
                    btn.disabled = false;
                    btn.innerText = "Continue to Destination";
                    btn.className = "w-full mt-8 bg-blue-600 text-white py-6 rounded-3xl font-black uppercase tracking-widest hover:bg-blue-500 shadow-xl shadow-blue-500/30 active:scale-95 transition-all";
                    
                    btn.onclick = () => window.location.href = targetUrl;
                }
            }, 1000);
        }

        analyzeLink();
    </script>
</body>
</html>
